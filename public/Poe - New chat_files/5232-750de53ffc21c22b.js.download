(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5232],{6429:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MessageLimitContextWrapper_bot",selections:[{alias:null,args:null,concreteType:"MessageLimit",kind:"LinkedField",name:"messageUsageLimit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalBalance",storageKey:null}],storageKey:null}],type:"Bot",abstractKey:null};a.hash="a2c4804de6ea4092a85a48d32dce29b0",t.default=a},37480:function(e,t,n){"use strict";var a,r;n.r(t);let l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"chatCode"},{defaultValue:null,kind:"LocalArgument",name:"shouldReturnChatCodePostSignupLogin"}],kind:"Fragment",metadata:null,name:"SignupWallModalContextWrapper_saveLoggedOutImportChatInfo_Mutation",selections:r=[{alias:null,args:[{kind:"Variable",name:"chatCode",variableName:"chatCode"},{kind:"Variable",name:"shouldReturnChatCodePostSignupLogin",variableName:"shouldReturnChatCodePostSignupLogin"}],concreteType:"SaveLoggedOutImportChatInfo",kind:"LinkedField",name:"saveLoggedOutImportChatInfo",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"SignupWallModalContextWrapper_saveLoggedOutImportChatInfo_Mutation",selections:r},params:{id:"be05ee39b9285fff3fe84c22580180c10e74dee606a1298719a2df7a2c76f9ba",metadata:{},name:"SignupWallModalContextWrapper_saveLoggedOutImportChatInfo_Mutation",operationKind:"mutation",text:null}};l.hash="a9352f08c4b11ae465a989c980db65a5",t.default=l},72930:function(e,t,n){"use strict";n.r(t);let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SignupWallModalContextWrapper_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null}],type:"Viewer",abstractKey:null};a.hash="e8beb913adc30551104fc70707d899ce",t.default=a},20014:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var a=n(85893),r=n(67294),l=n(22578);let o=()=>{let{userHasNoMessagesLeft:e}=r.useContext(i);return{userHasNoMessagesLeft:e}},i=r.createContext({userHasNoMessagesLeft:!1});t.Z=e=>{let{bot:t,children:o}=e,u=(0,l.useFragment)(n(6429),t),s=0===u.messageUsageLimit.totalBalance,d=(0,r.useMemo)(()=>({userHasNoMessagesLeft:s}),[s]);return(0,a.jsx)(i.Provider,{value:d,children:o})}},67894:function(e,t,n){"use strict";var a=n(11163),r=n(50530);t.Z=()=>{let{query:e}=(0,a.useRouter)(),t=e.chat;return(0,r.HD)(t)?t:null}},35409:function(e,t,n){"use strict";n.d(t,{dh:function(){return r},zl:function(){return m}});var a,r,l=n(85893),o=n(11163),i=n(67294),u=n(22578),s=n(67894),d=n(6793),c=n(75704),f=n(41019);let p=()=>Promise.all([n.e(5675),n.e(2119),n.e(7648),n.e(2143),n.e(552)]).then(n.bind(n,69742));(a=r||(r={}))[a.navBarSignupButton=1]="navBarSignupButton",a[a.leftSidebarExploreButton=2]="leftSidebarExploreButton",a[a.leftSidebarCreateBotButton=3]="leftSidebarCreateBotButton",a[a.sendMessage=4]="sendMessage",a[a.poeLogo=5]="poeLogo",a[a.headerBarCreateChatButton=6]="headerBarCreateChatButton",a[a.voteAction=7]="voteAction",a[a.loggedOutUserExpiredModal=8]="loggedOutUserExpiredModal",a[a.retryMessage=9]="retryMessage";let g=[r.leftSidebarCreateBotButton,r.leftSidebarExploreButton,r.headerBarCreateChatButton,r.poeLogo],m=()=>{let{setSignupWallVisible:e,shouldShowSignupWall:t,signupWallVisible:a,setTriggerSource:r,signupWallTriggerSource:l,setIsLoadingAfterSignupOrLogin:o}=i.useContext(h),d=(0,s.Z)(),c=(0,u.useRelayEnvironment)(),f=(0,i.useCallback)(t=>{if(e(!0),d){let e=!(t&&g.includes(t));(0,u.commitMutation)(c,{mutation:n(37480),variables:{chatCode:d,shouldReturnChatCodePostSignupLogin:e}})}t&&r(t)},[e,d,c,r]),p=(0,i.useCallback)(t=>{e(!1),t&&o(!0)},[e,o]);return{shouldShowSignupWall:t,signupWallVisible:a,openSignupWall:f,closeSignupWall:p,signupWallTriggerSource:l,setIsLoadingAfterSignupOrLogin:o}},h=i.createContext({setSignupWallVisible:()=>{},shouldShowSignupWall:!1,signupWallVisible:!1,setTriggerSource:()=>{},isLoadingAfterSignupOrLogin:!1,setIsLoadingAfterSignupOrLogin:()=>{}});t.ZP=e=>{let{viewer:t,children:a}=e,[r,s]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),[y,C]=(0,i.useState)(),_=(0,o.useRouter)(),b=(0,i.useCallback)(()=>{(0,d.dh)(_),s(!1)},[s,_]),S=(0,u.useFragment)(n(72930),t),v=(0,i.useMemo)(()=>({viewer:S}),[S]),x=(0,i.useMemo)(()=>({shouldShowSignupWall:!S.uid,setSignupWallVisible:s,signupWallVisible:r,setTriggerSource:C,signupWallTriggerSource:y,isLoadingAfterSignupOrLogin:g,setIsLoadingAfterSignupOrLogin:m}),[S.uid,s,r,y,C,g,m]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(h.Provider,{value:x,children:g?(0,l.jsx)(c.Sz,{}):(0,l.jsxs)(l.Fragment,{children:[a,r&&(0,l.jsx)(f.Z,{isOpen:r,onRequestClose:b,body:p,bodyProps:v})]})})})}},6793:function(e,t,n){"use strict";n.d(t,{Dl:function(){return x},Ho:function(){return B},SN:function(){return j},Sh:function(){return F},Tt:function(){return N},X0:function(){return k},b8:function(){return P},bU:function(){return S},bl:function(){return l},dh:function(){return L},gA:function(){return I},gL:function(){return q},gS:function(){return _},gW:function(){return R},n$:function(){return o},o1:function(){return W},q2:function(){return A},qN:function(){return v},yn:function(){return b}});var a,r,l,o,i=n(11163),u=n(67294),s=n(22120),d=n(20014),c=n(23491),f=n(35409),p=n(2197),g=n(90289),m=n(66795),h=n(46857),y=n(75408),C=n(50530);let _=e=>e("Something went wrong. Please wait a moment and try again."),b=e=>e("An error occurred, please try again."),S="redirect_url",v=(e,t)=>{k(e,t,{apple_optional_email:"1"})},x=(e,t,n)=>{k(e,n,{missing_birthday:"1",signup_method:t})},B=(e,t)=>{k(e,t,{missing_email:"1"})},k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.replace({pathname:"/login",query:{...n,[S]:null!=t?t:"/"}})},w=(e,t)=>{let n=R(t);e.replace(n)},M=e=>{let t=e.query.desktop_app_login_request_code;if((0,C.HD)(t)&&t.length>0)return t},j=(e,t)=>{e.replace({query:{...e.query,[S]:t}})},L=e=>{let t={...e.query};delete t[S],e.replace({query:t})},N=()=>"/login?".concat(S,"=").concat(encodeURIComponent("/close_window")),R=e=>"/desktop_app_open?desktop_app_login_request_code=".concat(encodeURIComponent(e)),P=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.replace(t?"/?".concat("login_success","=1"):"/")},W=e=>{let t=e.query[S];if((0,C.HD)(t)&&t.length>0)return t},I=e=>{let{redirectChatCode:t,redirectUrl:n}=e;if(t)return"/chat/".concat(t);if(n){let e=n.split("?")[1];if(e){let t=new URLSearchParams(e).get(S);if(t)return t}}return null!=n?n:void 0},F=()=>{let{t:e}=(0,s.$G)(),t=(0,i.useRouter)(),n=(0,y.AO)(),a=(0,p.ZP)(),{setShowIntro:r}=(0,c.CK)(),l=(0,m.q)(),o=(0,u.useCallback)(t=>a({content:t?e("You have successfully signed up"):e("You have successfully logged in"),type:p.pC.success}),[a,e]);return(0,u.useCallback)(async e=>{let{isSignUp:a,isEligibleForRedirectToLoggedInHomePage:i=!0,showLoginSuccessToastAfterRedirectingToHomePage:u=!1,redirectUrl:s=W(t),loginRequestCode:d=M(t)}=e;if(a?(await (0,h.hP)("sng_complete_registration"),r(!0)):await (0,h.hP)("sng_login"),d){o(!1),w(t,d);return}s?(s===t.asPath&&o(a),await t.replace(s)):i?P(t,u):o(a),l(),(0,g.E)(),n(!0)},[t,n,r,l,o])},q=e=>{let{defaultActionHandler:t,signupWallTriggerSource:n,shouldTriggerSignupWallOnlyIfNoLoggedOutMessagesLeft:a}=e,{shouldShowSignupWall:r,openSignupWall:l}=(0,f.zl)(),{userHasNoMessagesLeft:o}=(0,d.a)(),i=r&&(!a||o);return(0,u.useCallback)(()=>{i?l(n):t()},[i,l,n,t])};(a=l||(l={}))[a.loginStarted=0]="loginStarted",a[a.signupStarted=1]="signupStarted",a[a.signupContinued=2]="signupContinued",a[a.signupContinuedCodeSent=3]="signupContinuedCodeSent",a[a.signupContinuedBirthdayRequired=4]="signupContinuedBirthdayRequired",(r=o||(o={}))[r.emailAddress=0]="emailAddress",r[r.phoneNumber=1]="phoneNumber";let A=/^[0-9]{6,}$/i},69295:function(e,t,n){"use strict";n.d(t,{Bb:function(){return m},DF:function(){return c},F_:function(){return h},PL:function(){return f},Xd:function(){return d},oM:function(){return p},t9:function(){return g}});var a=n(85893),r=n(41664),l=n.n(r),o=n(67294),i=n(34616),u=n(10864),s=n.n(u);let d=(0,o.forwardRef)((e,t)=>{let{variant:n="secondary",href:r,target:u,className:d,icon:c,children:f,onClick:p,...g}=e,m=!o.Children.toArray(f).length;return r?(0,a.jsxs)(l(),{href:r,target:u,className:(0,i.$)(s().buttonBase,s()[n],d,m&&s().iconOnly),onClick:p,ref:t,children:[c,f]}):(0,a.jsxs)("button",{...g,className:(0,i.$)(s().buttonBase,s()[n],d,m&&s().iconOnly),onClick:p,ref:t,children:[c,f]})});d.displayName="ButtonBase";let c=(0,o.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsx)(d,{...n,ref:t,variant:"primary"})});c.displayName="ButtonPrimary";let f=(0,o.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsx)(d,{...n,ref:t,variant:"secondary"})});f.displayName="ButtonSecondary";let p=(0,o.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsx)(d,{...n,ref:t,variant:"tertiary"})});p.displayName="ButtonTertiary";let g=(0,o.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsx)(d,{...n,ref:t,variant:"flat"})});g.displayName="ButtonFlat";let m=(0,o.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsx)(d,{...n,ref:t,variant:"danger"})});m.displayName="ButtonDanger";let h=(0,o.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsx)(d,{...n,ref:t,variant:"chatShare"})});h.displayName="ButtonShareChat"},41019:function(e,t,n){"use strict";var a=n(85893),r=n(67294),l=n(83253),o=n.n(l),i=n(39620),u=n(34616),s=n(57138),d=n(50530),c=n(82686),f=n.n(c),p=n(69295),g=n(34950),m=n(75704),h=n(30791);let y=()=>document.body;o().setAppElement("#__next");let C={height:200},_=e=>{let{modalStyles:t}=e,[n,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=window.setTimeout(()=>{l(!0)},200);return()=>{window.clearTimeout(e)}},[]),(0,a.jsx)("article",{style:t||C,children:n&&(0,a.jsx)(m.Sz,{})})},b=e=>{let{error:t}=e;return(0,a.jsx)(S,{error:t})},S=e=>{let{error:t}=e,n=(0,s.Ej)(t);return(0,a.jsxs)("article",{className:f().errorState,children:["statusCode"in t&&(0,d.hj)(t.statusCode)&&(0,a.jsx)("h1",{children:t.statusCode}),(0,a.jsx)("p",{children:n})]})};t.Z=e=>{let{isOpen:t,onRequestClose:n,body:l,bodyProps:s,modalHeight:d,useMinHeight:c=!1,useIncreasedHeightInCompactScreen:m=!1,actions:C,headerActions:S,customHeaderStyle:v,customButtonStyle:x,shouldCloseOnOverlayClick:B=!0,variant:k="regular",showCloseButton:w=!0}=e,M=(0,r.useMemo)(()=>void 0===d?void 0:c?{minHeight:d}:{height:d},[d,c]),j=(0,r.useMemo)(()=>(0,r.lazy)(l),[l]),L=(0,r.useRef)(null);return(0,a.jsxs)(o(),{isOpen:t,onRequestClose:n,parentSelector:y,shouldCloseOnOverlayClick:B,shouldReturnFocusAfterClose:!0,overlayClassName:f().overlay,className:(0,u.$)(f().modal,"compact"===k&&f().modalCompact,m&&f().modalIncreasedHeight),children:[(0,a.jsxs)("div",{className:(0,u.$)(f().header,v),children:[w&&(0,a.jsx)(p.t9,{className:(0,u.$)(f().closeButton,f().closeFlatButton,x),onClick:n,"aria-label":"close modal",children:(0,a.jsx)(i.Z,{})}),C&&(0,a.jsx)("div",{className:f().actionsWrapper,children:C}),S&&(0,a.jsx)("div",{className:f().headerActionsWrapper,children:S})]}),(0,a.jsx)("article",{ref:L,style:M,className:f().modalBody,children:(0,a.jsx)(h.f.Provider,{value:L,children:(0,a.jsx)(g.Z,{fallback:b,children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(_,{modalStyles:M}),children:(0,a.jsx)(j,{...s})})})})}),C&&(0,a.jsx)("div",{className:f().footer,children:(0,a.jsx)("div",{className:f().actionsWrapper,children:C})})]})}},30791:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var a=n(67294);let r=(0,a.createContext)(null)},46857:function(e,t,n){"use strict";let a;n.d(t,{Rz:function(){return s},h0:function(){return p},hP:function(){return f}});var r=n(67294);let l="quora_b_46ba1291c98480d9dde6fed2b16c7cae__90053357",o="aff4cbc69cc3fee7a3b851fb6c40fed3",i="com.poe",u=async()=>{await d()},s=()=>{(0,r.useEffect)(()=>{u()},[])},d=async()=>(a||(a=c()),await a),c=async()=>{let e=await n.e(8961).then(n.t.bind(n,58961,23)),{singularSdk:t,SingularConfig:a}=e;return await new Promise(e=>{if(t&&a&&l&&o&&i){let n=new a(l,o,i);n.withInitFinishedCallback(()=>e()),t.init(n)}}),e},f=async e=>{let t=await d();return t.singularSdk.event(e)},p=async()=>{let e=await d();return e.singularSdk.getSingularDeviceId()}},82686:function(e){e.exports={medium:"only screen and (min-width : 685px)","compact-only":"only screen and (max-width : 684px)",overlay:"Modal_overlay___PrHh",modal:"Modal_modal__I_dBM",modalIncreasedHeight:"Modal_modalIncreasedHeight__TbIpS",modalCompact:"Modal_modalCompact__BQhmu",modalBody:"Modal_modalBody__BX0qa",header:"Modal_header__9MUIZ",actionsWrapper:"Modal_actionsWrapper__FyX5h",headerActionsWrapper:"Modal_headerActionsWrapper__3JP4U",closeButton:"Modal_closeButton__GycnR",footer:"Modal_footer__R7iNP",errorState:"Modal_errorState__7CZ5n"}}}]);