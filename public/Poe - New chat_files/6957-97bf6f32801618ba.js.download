(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6957],{73496:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"showDescription"}],kind:"Fragment",metadata:null,name:"BotHeader_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLimitedAccess",storageKey:null},{condition:"showDescription",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}]},{args:null,kind:"FragmentSpread",name:"BotImage_bot"},{args:null,kind:"FragmentSpread",name:"BotLink_bot"},{args:null,kind:"FragmentSpread",name:"IdAnnotation_node"},{args:null,kind:"FragmentSpread",name:"botHelpers_useViewerCanAccessPrivateBot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useIsSDXL_bot"}],type:"Bot",abstractKey:null};t.hash="e0a5f21c3b5a0d14b9b12baae7eedd1d",a.default=t},34122:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BotHeader_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"hasActiveSubscription",storageKey:null}],type:"Viewer",abstractKey:null};t.hash="b4fa7b95e577d1be47aa52afc4e565f8",a.default=t},33891:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BotLink_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"handle",storageKey:null}],type:"Bot",abstractKey:null};t.hash="574ee5a4c6d9ba8ef15b0678164be116",a.default=t},81132:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatPageNavActionBar_bot",selections:[{alias:null,args:null,kind:"ScalarField",name:"isSystemBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerIsFollower",storageKey:null},{args:null,kind:"FragmentSpread",name:"BotFollowStateButton_bot"},{args:null,kind:"FragmentSpread",name:"BotShareButton_bot"},{args:null,kind:"FragmentSpread",name:"botHelpers_useDeletion_bot"}],type:"Bot",abstractKey:null};t.hash="4b22e87f2b7eff2725617b32292bafb5",a.default=t},89915:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatPageNavbar_bot",selections:[{args:null,kind:"FragmentSpread",name:"ChatPageNavActionBar_bot"},{alias:null,args:null,kind:"ScalarField",name:"isDown",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPrivateBot",storageKey:null}],type:"Bot",abstractKey:null};t.hash="de6b67df6a8d52e06fa79bf9fc96ce57",a.default=t},36035:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[{defaultValue:5,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"backward",path:["messagesConnection"]}]},name:"ChatPageNavbar_chat",selections:[{alias:"messagesConnection",args:null,concreteType:"MessagesConnection",kind:"LinkedField",name:"__ChatMessagesView_chat_messagesConnection_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"chatHelpers_isChatBreak",selections:[{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"messageId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasPreviousPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startCursor",storageKey:null}],storageKey:null}],storageKey:null}],type:"Chat",abstractKey:null};t.hash="6159c52c7224ed5d3638a927d514d264",a.default=t},92672:function(e,a,n){"use strict";n.r(a);let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatPageNavbar_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"isLoggedOutUsageEnabled",storageKey:null},{alias:null,args:null,concreteType:"PoeUser",kind:"LinkedField",name:"poeUser",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};t.hash="d89e608d8ad9fa4ec37842c2c495bcc3",a.default=t},4824:function(e,a,n){"use strict";var t=n(85893),l=n(22120),s=n(22578),r=n(65869),i=n(37650),o=n(34616),u=n(24165),c=n.n(u),d=n(47547),g=n(94639);a.Z=e=>{let a,{bot:u,viewer:m,bold:h=!1,showLimitedAccess:_=!1,linked:p=!1,botIconSize:b=36,onClick:f,className:v}=e,x=(0,s.useFragment)(n(73496),u),k=(0,s.useFragment)(n(34122),m),{t:C}=(0,l.$G)(),S=(0,i.nn)(x),{isDeleted:B}=(0,i.iZ)(x),F=(0,i.FL)(x),y=B||!S,N=_&&x.isLimitedAccess&&!F,j=N&&(null==k?void 0:k.hasActiveSubscription);a=B?C("Deleted"):S?j?C("Subscription access"):N?C("Limited access"):x.description:C("Private");let P=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{bot:x,size:b}),(0,t.jsxs)("div",{className:c().textContainer,children:[(0,t.jsx)("p",{children:x.displayName}),a&&(0,t.jsx)("p",{className:c().subText,children:a}),(0,t.jsx)(r.Z,{node:x})]})]}),w=(0,o.$)(h?c().boldTitle:c().title,v);return p?(0,t.jsx)(g.Z,{className:w,bot:x,"data-deleted":y||void 0,onClick:f,children:P}):(0,t.jsx)("div",{className:w,"data-deleted":y||void 0,onClick:f,children:P})}},94639:function(e,a,n){"use strict";var t=n(85893),l=n(41664),s=n.n(l),r=n(22578);a.Z=e=>{let{bot:a,onClick:l,children:i,className:o,...u}=e,c=(0,r.useFragment)(n(33891),a);return(0,t.jsx)(s(),{className:o,href:"/".concat(c.handle),prefetch:!1,onClick:l,...u,children:i})}},57890:function(e,a,n){"use strict";n.d(a,{Z:function(){return M}});var t=n(85893),l=n(72306),s=n(46931),r=n.n(s),i=n(67294),o=n(22120),u=n(22578),c=n(3108),d=n.n(c),g=()=>{let{t:e}=(0,o.$G)();return(0,t.jsx)("div",{className:d().botDownBanner,children:e("This bot is currently down.")})},m=n(3597),h=n(39620),_=n(61918),p=n(71289),b=n(50141),f=n(10406),v=n(57031),x=n.n(v),k=n(44254),C=n(35409),S=n(69295),B=n(96333),F=n.n(B),y=()=>{let{t:e}=(0,o.$G)();return(0,t.jsx)("div",{className:F().offlineBanner,children:e("You are offline.")})},N=n(37650),j=n(13827),P=n.n(j),w=n(83243),K=n(72211),I=e=>{let{bot:a}=e,l=(0,u.useFragment)(n(81132),a),{isDeleted:s}=(0,N.iZ)(l);return l.isSystemBot||l.viewerIsFollower||s||l.isPrivateBot?null:(0,t.jsxs)("div",{className:P().container,children:[(0,t.jsx)(w.Z,{bot:l,variant:"flat"}),(0,t.jsx)(K.Z,{bot:l,variant:"flat"})]})},T=e=>{let{bot:a,chat:s,viewer:r,children:c,toggleSidebarButton:d,useChatTitle:v=!1,hideActionBar:B=!1}=e,F=(0,u.useFragment)(n(89915),a),N=(0,u.useFragment)(n(36035),null!=s?s:null),j=(0,u.useFragment)(n(92672),r),P=(0,i.useContext)(p.cq),{shouldShowSignupWall:w,openSignupWall:K}=(0,C.zl)(),T=!P.isEmbed,M=P.isEmbed,V=(0,f.Z)(),{t:D}=(0,o.$G)(),Z=(0,i.useMemo)(()=>{var e,a;return null==N?void 0:null===(a=N.messagesConnection)||void 0===a?void 0:null===(e=a.edges)||void 0===e?void 0:e.filter(e=>!(0,p.hb)(e.node)).map(e=>{var a;return null==e?void 0:null===(a=e.node)||void 0===a?void 0:a.messageId}).slice(-2)},[N]),{selectionMode:L,setSelectionMode:A,addSelection:H,clearSelection:W}=(0,b.ZP)(),E=(0,i.useCallback)(()=>{A(b.oW.none),W()},[A,W]),U=(0,i.useMemo)(()=>L===b.oW.none?d||(0,t.jsx)(l.Z,{}):(0,t.jsx)(S.t9,{className:x().endSelectionButton,onClick:E,children:(0,t.jsx)(h.Z,{className:x().closeIcon})}),[L,E,d]),z=(0,i.useCallback)(()=>{Z&&Z.forEach(e=>H(e)),A(b.oW.share)},[A,H,Z]),X=(0,i.useCallback)(e=>(0,t.jsx)(S.oM,{disabled:!(null==Z?void 0:Z.length),className:e?x().shareButton:x().noTextShareButton,onClick:z,children:(0,t.jsxs)("span",{className:x().shareTextWrapper,children:[(0,t.jsx)(_.Z,{className:x().shareIcon}),e&&(0,t.jsx)("span",{className:x().shareText,children:D("Share")})]})}),[z,D,Z]),G=(0,i.useCallback)(()=>{w&&K(C.dh.navBarSignupButton)},[w,K]),$=(0,i.useMemo)(()=>(0,t.jsx)(S.DF,{onClick:G,children:(0,t.jsx)("span",{className:x().signUpText,children:D("Sign up")})}),[G,D]),O=(0,i.useMemo)(()=>{if(M)return(0,t.jsx)(m.Z,{});let e=!j.poeUser&&j.isLoggedOutUsageEnabled;return(0,t.jsxs)("span",{className:x().rightNavItemWrapper,children:[L===b.oW.none&&!(null==F?void 0:F.isPrivateBot)&&X(!e),e&&$]})},[M,L,F,X,j,$]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{leftNavItem:T&&U,rightNavItem:O,useChatTitle:v,children:c}),!B&&(0,t.jsx)(I,{bot:F}),V&&(0,t.jsx)(y,{}),F.isDown&&(0,t.jsx)(g,{})]})},M=e=>(0,t.jsx)(T,{toggleSidebarButton:(0,t.jsx)(l.Z,{className:r().sidebarButton}),hideActionBar:!0,...e})},16392:function(e,a,n){"use strict";var t=n(85893),l=n(67294),s=n(34616),r=n(13333),i=n.n(r),o=n(30791);let u=e=>{let{loadMore:a,canLoadMore:n,rootMargin:t,scrollRootRef:s}=e,r=l.useRef(null),i=(0,l.useContext)(o.f),u=void 0!==s?s:i;return(0,l.useEffect)(()=>{var e;if(!r.current||!n)return;let l=new IntersectionObserver(e=>{e[0].isIntersecting&&a()},{root:null!==(e=null==u?void 0:u.current)&&void 0!==e?e:null,threshold:0,rootMargin:t});return l.observe(r.current),()=>{l.disconnect()}},[a,n,t,u]),r},c=(e,a,n)=>"".concat(!a&&n?e:0,"px ").concat(a&&!n?e:0,"px ")+"".concat(a||n?0:e,"px ").concat(a&&n?e:0,"px");a.Z=e=>{let{children:a,className:n,loadMore:l,hasMore:r,isLoading:o,loadingState:d=null,error:g,errorState:m=null,threshold:h,horizontal:_=!1,reverse:p=!1,scrollRootRef:b}=e,f=u({loadMore:l,canLoadMore:r&&!o&&!g,rootMargin:c(h,_,p),scrollRootRef:b}),v=g?m:(0,t.jsx)("div",{ref:f,className:i().pagingTrigger,children:o&&d});return(0,t.jsxs)("div",{className:(0,s.$)(i().container,_&&i().horizontal,n),children:[p&&v,a,!p&&v]})}},50141:function(e,a,n){"use strict";n.d(a,{Br:function(){return d},oW:function(){return l}});var t,l,s=n(85893),r=n(67294);(t=l||(l={}))[t.none=0]="none",t[t.share=1]="share",t[t.delete=2]="delete";let i=(0,r.createContext)(l.none),o=(0,r.createContext)(()=>{}),u=(0,r.createContext)([]),c=(0,r.createContext)(()=>{}),d=e=>{let{children:a}=e,[n,t]=(0,r.useState)(l.none),[d,g]=(0,r.useState)([]);return(0,s.jsx)(i.Provider,{value:n,children:(0,s.jsx)(o.Provider,{value:t,children:(0,s.jsx)(u.Provider,{value:d,children:(0,s.jsx)(c.Provider,{value:g,children:a})})})})};a.ZP=()=>{let e=(0,r.useContext)(i),a=(0,r.useContext)(o),n=(0,r.useContext)(u),t=(0,r.useContext)(c),s=(0,r.useCallback)(e=>{t(a=>[...a,e])},[t]),d=(0,r.useCallback)(e=>{t(a=>a.filter(a=>a!==e))},[t]),g=(0,r.useCallback)(e=>{n.includes(e)?d(e):s(e)},[n,d,s]),m=(0,r.useCallback)(()=>{t([])},[t]),h=(0,r.useMemo)(()=>e!==l.none,[e]);return{selectionMode:e,selectedIds:n,setSelectionMode:a,addSelection:s,removeSelection:d,toggleSelection:g,clearSelection:m,isSelecting:h}}},3108:function(e){e.exports={botDownBanner:"BotDownBanner_botDownBanner__gn4_i"}},24165:function(e){e.exports={title:"BotHeader_title__cURS_",boldTitle:"BotHeader_boldTitle__KgfYh",textContainer:"BotHeader_textContainer__kVf_I",subText:"BotHeader_subText__0Nkxq"}},95427:function(e){e.exports={emptyView:"ChatMessagesView_emptyView__HqDf7",infiniteScroll:"ChatMessagesView_infiniteScroll__vk3VX",messagePair:"ChatMessagesView_messagePair__ZEXUz",loaderWrapper:"ChatMessagesView_loaderWrapper__XPhVQ",errorState:"ChatMessagesView_errorState__xXPE4",privateMessageIndicator:"ChatMessagesView_privateMessageIndicator__kbYoS",privateMessageLink:"ChatMessagesView_privateMessageLink__TRz4N",privateMessageIcon:"ChatMessagesView_privateMessageIcon__B4kGX"}},96333:function(e){e.exports={offlineBanner:"ChatOfflineBanner_offlineBanner__KOexN"}},13827:function(e){e.exports={container:"ChatPageNavActionBar_container__PVN0U"}},57031:function(e){e.exports={endSelectionButton:"ChatPageNavbar_endSelectionButton__V5yoM",shareButton:"ChatPageNavbar_shareButton__QuaBY",noTextShareButton:"ChatPageNavbar_noTextShareButton__Y7z4N",rightNavItemWrapper:"ChatPageNavbar_rightNavItemWrapper__hlLkg",shareTextWrapper:"ChatPageNavbar_shareTextWrapper__yHoeV",shareText:"ChatPageNavbar_shareText__Gm0Zc",signUpText:"ChatPageNavbar_signUpText__wlCfd",closeIcon:"ChatPageNavbar_closeIcon__eqA3l"}},46931:function(e){e.exports={sidebarButton:"MainNavbar_sidebarButton__5RC3i"}},13333:function(e){e.exports={container:"InfiniteScroll_container__PHsd4",horizontal:"InfiniteScroll_horizontal__i7SXE",pagingTrigger:"InfiniteScroll_pagingTrigger__cdz9I"}}}]);